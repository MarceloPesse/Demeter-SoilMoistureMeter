{% extends "base.html" %}

{% block title %}
	Setor {{setor.id_modulo}}
{% endblock title %}


{% block title2 %}
        {{setor.cultura_setor}}
{% endblock title2 %}

{% block extrahead %}
<script>
    
    var chartColours = ['#88bbc8', '#ed7a53', '#9FC569', '#bbdce3', '#9a3b1b', '#5a8022', '#2c7282'];
    var d1 = {{var_grafico_terra}}
    
    // document ready function
    $(document).ready(function() {
	
    var divElement = $('div'); //log all div elements

    //------------- Visitor chart -------------//
    
     if (divElement.hasClass('visitors-chart')) {
	    $(function () {
		    //some data
		    //var d1 = [[1, 3+randNum()], [2, 6+randNum()], [3, 9+randNum()], [4, 12+randNum()],[5, 15+randNum()],[6, 18+randNum()],[7, 21+randNum()],[8, 15+randNum()],[9, 18+randNum()],[10, 21+randNum()],[11, 24+randNum()],[12, 27+randNum()],[13, 30+randNum()],[14, 33+randNum()],[15, 24+randNum()],[16, 27+randNum()],[17, 30+randNum()],[18, 33+randNum()],[19, 36+randNum()],[20, 39+randNum()],[21, 42+randNum()],[22, 45+randNum()],[23, 36+randNum()],[24, 39+randNum()],[25, 42+randNum()],[26, 45+randNum()],[27,38+randNum()],[28, 51+randNum()],[29, 55+randNum()], [30, 60+randNum()]];
		    //var d2 = [[1, randNum()-5], [2, randNum()-4], [3, randNum()-4], [4, randNum()],[5, 4+randNum()],[6, 4+randNum()],[7, 5+randNum()],[8, 5+randNum()],[9, 6+randNum()],[10, 6+randNum()],[11, 6+randNum()],[12, 2+randNum()],[13, 3+randNum()],[14, 4+randNum()],[15, 4+randNum()],[16, 4+randNum()],[17, 5+randNum()],[18, 5+randNum()],[19, 2+randNum()],[20, 2+randNum()],[21, 3+randNum()],[22, 3+randNum()],[23, 3+randNum()],[24, 2+randNum()],[25, 4+randNum()],[26, 4+randNum()],[27,5+randNum()],[28, 2+randNum()],[29, 2+randNum()], [30, 3+randNum()]];
		    //define placeholder class
		    var placeholder = $(".visitors-chart");
		    //graph options
		    var options = {
				    grid: {
					    show: true,
					aboveData: true,
					color: "#3f3f3f" ,
					labelMargin: 5,
					axisMargin: 0, 
					borderWidth: 0,
					borderColor:null,
					minBorderMargin: 5 ,
					clickable: true, 
					hoverable: true,
					autoHighlight: true,
					mouseActiveRadius: 20
				    },
			    series: {
				    grow: {
					    active: false,
					    stepMode: "linear",
					    steps: 50,
					    stepDelay: true
				    },
				lines: {
				    show: true,
				    fill: true,
				    lineWidth: 4,
				    steps: false
				    },
				points: {
				    show:true,
				    radius: 5,
				    symbol: "circle",
				    fill: true,
				    borderColor: "#fff",
				}
			    },
			    legend: { 
				    position: "ne", 
				    margin: [0,-25], 
				    noColumns: 0,
				    labelBoxBorderColor: null,
				    labelFormatter: function(label, series) {
						// just add some space to labes
						return label+'&nbsp;&nbsp;';
					     }
			    },
			    yaxis: { min: 0 },
			    xaxis: {ticks:11, tickDecimals: 0},
			    colors: chartColours,
			    shadowSize:1,
			    tooltip: true, //activate tooltip
				    tooltipOpts: {
					    content: "%s : %y.0",
					    shifts: {
						    x: -30,
						    y: -50
					    }
				    }
			};   
	    
        	$.plot(placeholder, [ 
        		{
        			label: "Umidade da Terra", 
        			data: d1,
        			lines: {fillColor: "#f2f7f9"},
        			points: {fillColor: "#88bbc8"}
        		}, 
        	], options);
		    
	});
	}//end if
    });
</script>
{% endblock extrahead %}

{% block content %}
                    <div class="row-fluid">
                        <div class="span8">
                            <div class="box chart gradient">
                                <div class="title">
                                    <h4>
                                        <span class="icon16 icomoon-icon-bars"></span>
                                        <span>Umidade da Terra [%] pelo Tempo [min]</span>
                                    </h4>
                                    <a href="#" class="minimize">Minimize</a>
                                </div>
                                <div class="content" style="padding-bottom:0;">
                                   <div class="visitors-chart" style="height: 230px;width:100%;margin-top:15px; margin-bottom:15px;"></div>
                                   <ul class="chartShortcuts">
                                        <li>
                                            <a href="#">
                                                <span class="head">Média - Terra</span>
                                                <span class="number">{{var_media_terra}}%</span>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div><!-- End .box -->
                        </div><!-- End .span8 -->

                        <div class="span4">
                            <div class="sparkStats">
                                <form method="POST" action="/fazenda/{{fazenda.id}}/setor/{{setor.id}}/">
                                    <div class="fazenda_form_box">
                                        <span class="fazenda_form_text">ID do módulo:</span>
                                        <span class="fazenda_form_text">{{setor_form.id_modulo}}</span>
                                    </div>
				    <div class="fazenda_form_box">
                                        <span class="fazenda_form_text">Cultura do Setor:</span>
                                        <span class="fazenda_form_text">{{setor_form.cultura_setor}}</span>
                                    </div>
				    <div class="fazenda_form_box">
                                        <span class="fazenda_form_text">Região do Setor:</span>
                                        <span class="fazenda_form_text">{{setor_form.regiao_setor}}</span>
                                    </div>
                                    <div class="fazenda_form_box">
                                        <span class="fazenda_form_text">Descrição do Setor:</span>
                                        <span class="fazenda_form_text">{{setor_form.descricao_setor}}</span>
                                    </div>
				    <div class="fazenda_form_box">
					<button type="submit" class="btn btn-info marginT10">Salvar alterações</button>
				    </div>
                                </form>
				<div class="fazenda_form_box">
				    <span class="fazenda_form_text"><a href='/fazenda/{{fazenda.id}}/exclui_setor/{{setor.id}}/' class="inicio_excluir"><img alt="Excluir setor" onclick="alertExcluirFaz()" src="/static/img/ico_close_off.png" onmouseover="src='/static/img/ico_close_over.png'" onmouseout="src='/static/img/ico_close_off.png'"/> - Excluir setor</a></span>
				</div>
				<div class="fazenda_form_box">
				    <span class="fazenda_form_text"><a href='/fazenda/{{fazenda.id}}/edita_setor_mapa/{{setor.id}}/' class="inicio_excluir">Editar posicão</a></span>
				</div>
                            </div><!-- End .sparkStats -->
                        </div><!-- End .span4 -->
                    </div><!-- End .row -->
        
{% endblock content %}